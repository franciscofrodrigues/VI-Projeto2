<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
    <!--<script type="text/javascript" src="//d3js.org/d3.v3.js"></script>-->
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">

    <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">
    <link rel="stylesheet" href="./css/star_plot.css">
    <title>Mapa</title>
</head>

<body>

    <script>
    // Função para carregar dados de um arquivo CSV
        function loadCSV(callback) {
          d3.csv("./data/DatasetResidentes2.csv", function (data) {
    
            var primeiraLinha = data[0];
    
            // Formatar os dados conforme esperado pelo gráfico de radar
            var formattedData = data.map(function (d) {
              return {
                className: d.nome,
                axes: [
                  { axis: "0 - 19", value: parseInt(+d['0-19']) },
                  { axis: "20 - 39", value: parseInt(+d['20-39']) },
                  { axis: "40 - 59", value: parseInt(+d['40-59']) },
                  { axis: "60 - 79", value: parseInt(+d['60-79']) },
                  { axis: "80+", value: parseInt(+d['80+']) }
                ]
              };
            });
    
            callback(formattedData);
            console.log(formattedData[0].className)
            console.log(formattedData.map(item => item.className));
          });
        }
    
        // Função para desenhar o gráfico de radar com os dados carregados
        function drawRadarChart(data) {
          RadarChart.defaultConfig.levelTick = true;
    
          console.log("Dados recebidos:", data);
    
          d3.select(".chart-container").html("");
    
          console.log("Desenhando gráfico com dados:", data);
    
          RadarChart.draw(".chart-container", data);
        }
    
    
    
        // Carregar dados e desenhar o gráfico de radar
        loadCSV(drawRadarChart);</script>
    <div class="text">
        <h5>População Portuguesa</h4>
        <h3>População Residente</h3>
        <h3>Taxa Bruta de Natalidade</h3>
        <h3>Taxa Bruta de Mortalidade</h3>
    </div>
    
    <div class="svg-container">
        <svg id="mapa" width="800" height="800"></svg>
    </div>

    <div class="chart">
        <h4>População por faixa etária</h4>
        <p>em Portugal</p>
        <hr>
        <div class="chart-container"></div>
    </div>
    
    <script type="text/javascript" src="scripts/mapa_vis.js"></script>
    <script type="text/javascript" src="./scripts/star_plot.js"></script>

    <!-- <script type="text/javascript" src="scripts/lay_map.js"></script> -->
</body>

</html>